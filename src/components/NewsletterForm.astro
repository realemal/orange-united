---
export interface Props {
  title?: string;
  description?: string;
  compact?: boolean;
}

const { 
  title = "Stay Informed", 
  description = "Get updates on school board meetings, curriculum changes, and ways to get involved.",
  compact = false 
} = Astro.props;
---

<div class={compact ? 'newsletter-compact' : 'newsletter-full'}>
  {!compact && (
    <div class="mb-6 text-center">
      <h3 class="text-2xl font-bold text-gray-900 mb-2">{title}</h3>
      <p class="text-gray-600">{description}</p>
    </div>
  )}
  
  <!-- Netlify Form - Can be replaced with Mailchimp/Beehiiv embed via CMS -->
  <form
    name="newsletter"
    method="POST"
    data-netlify="true"
    netlify-honeypot="bot-field"
    class="space-y-4"
  >
    <input type="hidden" name="form-name" value="newsletter" />
    
    <!-- Honeypot field -->
    <div class="hidden">
      <label>
        Don't fill this out if you're human: <input name="bot-field" />
      </label>
    </div>

    <div class={compact ? 'flex gap-2' : 'space-y-3'}>
      {!compact && (
        <input
          type="text"
          name="name"
          placeholder="Name (optional)"
          class="w-full px-4 py-3 border-2 border-gray-900 bg-white text-gray-900 font-medium focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
        />
      )}
      
      <input
        type="email"
        name="email"
        placeholder="Email address"
        required
        class={compact 
          ? "flex-1 px-4 py-3 border-2 border-gray-900 bg-white text-gray-900 font-medium focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
          : "w-full px-4 py-3 border-2 border-gray-900 bg-white text-gray-900 font-medium focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
        }
      />
      
      <button
        type="submit"
        class={compact
          ? "bg-orange-500 text-white px-6 py-3 min-h-[48px] border-2 border-orange-500 font-black uppercase text-sm tracking-wide hover:bg-orange-600 hover:border-orange-600 transition-colors whitespace-nowrap"
          : "w-full bg-orange-500 text-white px-6 py-3.5 min-h-[48px] border-2 border-orange-500 font-black uppercase text-sm tracking-wide hover:bg-orange-600 hover:border-orange-600 transition-colors"
        }
      >
        Submit
      </button>
    </div>

    <p class="text-xs text-gray-500 text-center mt-3">
      Privacy protected. Unsubscribe at any time.
    </p>
  </form>
</div>

<style>
  .newsletter-full {
    @apply w-full;
  }
  
  .newsletter-compact {
    @apply w-full;
  }
</style>

